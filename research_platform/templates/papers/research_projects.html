{% extends 'base.html' %}
{% block title %}Research Projects - Orravyn Research{% endblock %}

{% block extra_css %}
<style>
    .page-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; }
    .page-header h1 { font-size: 1.6rem; font-weight: 700; color: var(--text-primary); }

    .projects-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(min(100%, 340px), 1fr)); gap: 1.5rem; }

    .project-card {
        background: transparent; border: 1px solid var(--glass-border); border-radius: 14px;
        padding: 1.5rem; text-decoration: none; display: block;
        transition: all 0.3s ease; color: inherit; position: relative; overflow: hidden;
    }
    .project-card::before {
        content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px;
        background: var(--primary-gradient); transform: scaleX(0); transition: transform .3s ease;
    }
    .project-card:hover { transform: translateY(-3px); border-color: var(--accent-color); color: inherit; }
    .project-card:hover::before { transform: scaleX(1); }

    .project-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: .75rem; gap: .5rem; }
    .project-name { font-size: 1.05rem; font-weight: 700; color: var(--text-primary); line-height: 1.4; }
    .status-badge {
        display: inline-block; padding: .2rem .65rem; border-radius: 50px;
        font-size: .7rem; font-weight: 700; text-transform: uppercase; letter-spacing: .05em; white-space: nowrap;
    }
    .status-planning { background: rgba(148,163,184,.1); color: #94a3b8; }
    .status-active { background: rgba(16,185,129,.1); color: #10b981; }
    .status-completed { background: rgba(37,99,235,.1); color: #2563eb; }
    .status-on_hold { background: rgba(245,158,11,.1); color: #f59e0b; }

    .project-desc { font-size: .88rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 1rem;
        display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
    .project-meta { display: flex; gap: 1rem; font-size: .78rem; color: var(--text-secondary); flex-wrap: wrap; }
    .project-meta span { display: flex; align-items: center; gap: .3rem; }

    .empty-state { text-align: center; padding: 4rem 1.5rem; color: var(--text-secondary); }
    .empty-state i { font-size: 2.5rem; opacity: .2; display: block; margin-bottom: .75rem; }
</style>
{% endblock %}

{% block content %}
<div class="page-header">
    <h1><i class="fas fa-flask" style="color:var(--accent-color);margin-right:.5rem"></i>Research Projects</h1>
</div>

{% if projects %}
<div class="projects-grid">
    {% for project in projects %}
    <a href="{% url 'papers:research_project_detail' project.pk %}" class="project-card">
        <div class="project-header">
            <div class="project-name">{{ project.name }}</div>
            <span class="status-badge status-{{ project.status }}">{{ project.get_status_display }}</span>
        </div>
        {% if project.description %}
        <p class="project-desc">{{ project.description }}</p>
        {% endif %}
        <div class="project-meta">
            <span><i class="fas fa-user"></i> {{ project.created_by.username }}</span>
            <span><i class="fas fa-users"></i> {{ project.members.count }} member{{ project.members.count|pluralize }}</span>
            <span><i class="fas fa-file-alt"></i> {{ project.papers.count }} paper{{ project.papers.count|pluralize }}</span>
            {% if project.start_date %}<span><i class="fas fa-calendar"></i> {{ project.start_date|date:"M Y" }}</span>{% endif %}
        </div>
    </a>
    {% endfor %}
</div>
{% else %}
<div class="empty-state">
    <i class="fas fa-flask"></i>
    <p>No research projects found.</p>
    <p style="font-size:.85rem;margin-top:.5rem">Projects you create or join will appear here.</p>
</div>
{% endif %}
{% endblock %}
